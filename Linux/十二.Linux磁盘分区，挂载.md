#### 十二.Linux磁盘分区，挂载

##### 1.Linux分区原理介绍

​		Linux无论有几个分区，分给哪一个目录使用，它归根到底就只有一个根目录，一个独立且唯一的文件结构，Linux中每个分区都是用来组成整个文件系统的一部分

​		Linux采用一种叫做“载入”的处理方法，他的整个文件系统中包含一整套的文件和目录，且将一个分区和一个目录联系起来，这时要载入的一个分区是他的存储空间在一个目录下获得

指令：  lsblk    -f         查看系统的分区和挂载情况

![1564587134740](E:\Typora笔记\Pic\1564587134740.png) 

​		sda1  :分区情况

​		ext4   :分区类型

​		9f9d**********:唯一标识分区的40位不重复的字符串UUID

​		/boot  :挂载点

![1564587406164](E:\Typora笔记\Pic\1564587406164.png)

##### 2.增加一块硬盘的经典案例

​		需求：给Linux系统增加一块硬盘sdb1（2G），并且挂载到/home/newdisk目录下

​		1）虚拟机添加硬盘

​			虚拟机菜单-设置-设备列表添加硬盘-一路下一步（选择磁盘大小的地方进行修改）-完成，重启系统

![1564589683219](E:\Typora笔记\Pic\1564589683219.png)

​		2）分区   fdisk/dev/sdb

​			输入分区命令     fdisk/dev/sdb

​			m: 显示命令列表

​			p：显示磁盘分区

​			n：新增分区

​			d：删除分区

​			w：写入并退出

​			开始分区后输入n，新增分区，然后选择p，分区类型选择主分区，两次回车默认剩余全部空间。最后输入w写入分区并退出，若不保存退出输入q

​		3）格式化    

​			指令：mkfs    -t  ext4   /dev/sdb1

​					其中ext4是分区类型

​		4）挂载		

​			先创建一个 /home/newdisk  目录，

​			挂载：将一个分区和一个目录联系起来

​			挂载指令：mount      /dev/sdb1    /home/newdisk

​			解除挂载：mount     /dev/sdb1     /home/newdisk

​		5）设置可以自动挂载(永久挂载，当重启机器之后，仍可自动挂载)

​		  （修改文件）vim  /etc/fstab

​	        (写入)  /dev/sdb1                  /home/newdisk           ext4    defaults        0  0

​			![1564590140409](E:\Typora笔记\Pic\1564590140409.png)		

##### 3.磁盘情况查询

​		查询系统整体磁盘情况

​		指令：  df  -h

![1564590448688](E:\Typora笔记\Pic\1564590448688.png)

​		查询指定目录的磁盘占用情况

​		du   -h    目录

​			-s	指定目录占用大小汇总

​			-h	带计量单位

​			-a	含文件

​			--max-depth=1	子目录深度

​			-c	列出明细的同时，增加汇总值

​		例1：查询/opt目录的磁盘占用情况，深度为1

​			![1564590808359](E:\Typora笔记\Pic\1564590808359.png)

​		例2:统计/home文件夹下的文件个数

​					ls -l /home | grep "^-" | wc -l

![1564591182544](E:\Typora笔记\Pic\1564591182544.png)

​		例3:统计/home文件夹下的目录个数

​					ls -l /home | grep "^d" | wc -l

![1564591263192](E:\Typora笔记\Pic\1564591263192.png)

​		例4:统计/home文件夹下文件的个数，包括自文件

​					ls -lR /home | grep "^-" | wc -l

![1564591437093](E:\Typora笔记\Pic\1564591437093.png)

​		例5:统计文件夹下目录的个数，包括子文件夹下的

​					ls -lR /home | grep "^d" | wc -l

![](E:\Typora笔记\Pic\1564591332150.png)

​		例6:以树状显示目录结构

​				安装插件指令：yum  install  tree

![1564591555309](E:\Typora笔记\Pic\1564591555309.png)

​				使用tree指令显示树状文件目录

![1564591625797](E:\Typora笔记\Pic\1564591625797.png)

