#### 一.ActiveMQ基础

​	MQ：消息中间件

##### 1.MQ的产品种类

​	Kafka

​	RabbitMQ

​	RocketMQ

​	ActiveMQ

##### 2.使用MQ的原因

​	解耦

​	削峰

​	异步

​	在没有使用MQ之前，系统之间直接调用实际工程落地和存在问题，写程序一般采用链式调用，从上往下从前往后再到前，一个模块功能会调用多个方法或者模块，在大型的分布式应用中，系统之间的RPC交互繁杂

​	系统之间接口耦合比较严重

​		每增加一个下游功能，都要对上层接口进行改造，使之能够传递消息给新增的功能

​	面度大流量并发时，容易被冲垮

​		每个接口模块的吞吐能力是有限的，这个上限面对较大的流量会造成较大负担

​	等待同步存在性能问题



​	要做到系统解耦，当新的模块接进来时，可以做到改动量最小

​	设置流量缓冲池，可以让后端系统按照自己的吞吐能力进行消费不被冲垮

​	强弱依赖处理能将非关键调用链路的操作异步化并提升系统的吞吐能力



​	面向消息的中间件MOM能够很好的解决以上问题

​	MOM是指利用高效可靠的消息传递机制进行与平台无关的数据交流，并基于数据通信来进行分布式系统的集成，通过提供消息传递和消息排队模型在分布式环境下提供应用解耦，弹性伸缩，冗余存储，流量削峰，异步通信，数据同步等功能

​	流程：发送者把消息发送给消息服务器，消息服务器将消息存放在若干队列/主题中，在合适的时候，消息服务器会将消息转发给接受者，在这个过程中，发送和接收是异步的，也就是发送无需等待，而且发送者和接受者的生命周期也没有必然关系，尤其在发布pub/订阅sub模式下，也可以完成一对多的通信，即让一个消息有多个接受者。



​	异步处理模式：

​		消息发送者可以发送一个消息而无需等待响应，消息发送者将消息发送到一条虚拟的通道（主题或队列）上，消息的接受者订阅或监听该通道，一条消息可能最终转发给一个或者多个消息的接受者，这些结束这都无需对消息发送者做出同步响应，整个过程都是异步的

##### 3.ActiveMQ安装和控制台

​	官网下载

​	上传到/opt目录下

​	![image-20191120194934183](E:\Typora笔记\Pic\image-20191120194934183.png)

​	解压到当前文件夹

```txt
tar -zxvf apache-activemq-5.15.10-bin.tar.gz
```

![image-20191120195315654](E:\Typora笔记\Pic\image-20191120195315654.png)

​	在根目录下建文件夹

```txt
mkdir myActiveMQ
```

​	将ActiveMQ拷贝到空文件夹当中

```txt
cp -r  apache-activemq-5.15.10 /myActiveMQ/
```

​	进入bin目录进行启动ActiveMQ



​				**ActiveMQ需要使用JDK1.8  FOR  LINUX 的运行时环境**



```txt
./activemq start/stop
```

![image-20191120200939246](E:\Typora笔记\Pic\image-20191120200939246.png)

​	ActiveMQ的默认进程端口是61616

​	进程id已启动

```txt
ps -ef | grep activemq
```

![image-20191121104115303](E:\Typora笔记\Pic\image-20191121104115303.png)

​	查看端口是否被占用

```txt
netstat -anp | grep 61616
```

![image-20191121110900010](E:\Typora笔记\Pic\image-20191121110900010.png)

```txt
lsof -i:61616
```

![image-20191121111041158](E:\Typora笔记\Pic\image-20191121111041158.png)

​	关闭activemq服务

```txt
./activemq  stop
```

![image-20191121111219048](E:\Typora笔记\Pic\image-20191121111219048.png)



​	另一种制定运行日志文件的启动方式

```
./activemq start > /myactivemq/myrunmq.log
```

![image-20191121112659061](E:\Typora笔记\Pic\image-20191121112659061.png)

![image-20191121112711251](E:\Typora笔记\Pic\image-20191121112711251.png)

​	启动成功



​	ps：Linux查询后台进程的三种方法

```txt
ps -ef |grep activemq | grep -v grep

netstat -anp | grep 61616

lsof -i:61616
```





​	控制台：

​		成功启动ActiveMQ

![image-20191121180201740](E:\Typora笔记\Pic\image-20191121180201740.png)

​	访问域名：

```txt
http://192.168.44.130:8161/admin/

默认的用户名和密码是:  admin   admin
```

​	防火墙关闭

```txt
service  iptables stop
```

![image-20191121180951477](E:\Typora笔记\Pic\image-20191121180951477.png)

​	在windows环境访问默认域名端口

```txt
http://192.168.44.130:8161/index.html
```

![image-20191121182020245](E:\Typora笔记\Pic\image-20191121182020245.png)

![image-20191121182353906](E:\Typora笔记\Pic\image-20191121182353906.png)

![image-20191121182636122](E:\Typora笔记\Pic\image-20191121182636122.png)

​												**采用61616端口JMS服务**

​										**采用8161端口提供管理控制台服务**



















